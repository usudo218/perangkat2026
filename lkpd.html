<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lembar Kerja Peserta Didik (LKPD)</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f1f5f9; margin: 0; padding: 20px; color: #334155; }
        
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        .header { border-bottom: 2px solid #e2e8f0; padding-bottom: 20px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: flex-start; }
        .header h1 { margin: 0; color: #1e293b; font-size: 1.8rem; }
        .header p { margin: 5px 0 0; color: #64748b; }
        
        .student-badge { background: #eff6ff; color: #2563eb; padding: 10px 15px; border-radius: 8px; font-weight: bold; border: 1px solid #bfdbfe; text-align: right; }
        
        .soal-box { background: #fffcf0; border-left: 5px solid #f59e0b; padding: 20px; margin-bottom: 30px; border-radius: 4px; }
        .soal-box h3 { margin-top: 0; color: #b45309; }
        
        .data-container { background: #1e293b; color: #f8fafc; padding: 25px; border-radius: 8px; font-family: 'Courier New', monospace; margin: 20px 0; overflow-x: auto; line-height: 1.6; border: 1px solid #475569; position: relative; }
        
        .btn-back { display: inline-block; padding: 10px 20px; background: #94a3b8; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; margin-top: 20px; }
        .btn-back:hover { background: #64748b; }

        .btn-print { float: right; background: #2563eb; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-print:hover { background: #1d4ed8; }

        .instruction-list ol { padding-left: 20px; }
        .instruction-list li { margin-bottom: 8px; }

        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; padding: 0; }
            .btn-back, .btn-print { display: none; }
            .data-container { background: white; color: black; border: 2px solid black; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <div>
                <h1>ULANGAN HARIAN: VISUALISASI DATA</h1>
                <p>Mata Pelajaran: Informatika | Kelas 10</p>
            </div>
            <div class="student-badge">
                <div id="namaSiswa">Loading...</div>
                <div id="kelasSiswa" style="font-size: 0.85rem; font-weight: normal; margin-top: 4px;">-</div>
                <div id="kodeSoal" style="font-size: 0.75rem; color: #64748b; margin-top: 4px;">Kode Soal: -</div>
            </div>
        </div>

        <button class="btn-print" onclick="window.print()">üñ®Ô∏è Cetak Soal</button>

        <div class="instruction-list">
            <h3>Instruksi Pengerjaan:</h3>
            <p>Berdasarkan <strong>DATA KHUSUS</strong> yang diberikan di bawah, kerjakan langkah berikut pada lembar jawaban Anda:</p>
            <ol>
                <li>Hitung <strong>Banyak Data (n)</strong>.</li>
                <li>Tentukan <strong>Nilai Maksimal</strong> dan <strong>Nilai Minimal</strong>.</li>
                <li>Hitung <strong>Range (Jangkauan)</strong> data tersebut.</li>
                <li>Hitung <strong>Banyak Kelas (K)</strong> menggunakan rumus Sturgess: <code>K = 1 + 3,3 log(n)</code>.</li>
                <li>Hitung <strong>Panjang/Lebar Kelas (C)</strong>.</li>
                <li>Buatlah <strong>Tabel Distribusi Frekuensi</strong>.</li>
                <li>Visualisasikan data tersebut menjadi <strong>Grafik Batang (Histogram)</strong>.</li>
            </ol>
        </div>

        <hr style="border: 0; border-top: 1px solid #e2e8f0; margin: 30px 0;">

        <div class="soal-box">
            <h3>DATA SOAL ANDA</h3>
            <p>Berikut adalah data mentah yang harus Anda olah. Pastikan Anda tidak menukar data ini dengan teman Anda.</p>
            
            <div id="tempatData" class="data-container">
                Memuat data soal...
            </div>
        </div>

        <a href="dashboard.html" class="btn-back">‚Üê Kembali ke Dashboard</a>
    </div>

    <script src="siswa.js"></script>

    <script>
        // 1. DATABASE SOAL (34 VARIASI)
        const DATABASE_SOAL = [
            // TIPE A: Deret Angka (0-11)
            "60, 75, 82, 65, 70, 90, 85, 68, 72, 78, 80, 64, 76, 88, 92, 66, 74, 84, 79, 62, 95, 86, 71, 77, 83, 69, 73, 81, 67, 89, 75, 85, 70, 65, 80",
            "150, 162, 155, 158, 165, 170, 153, 160, 157, 164, 168, 152, 156, 161, 166, 172, 154, 159, 163, 167, 151, 158, 162, 169, 155, 160, 165, 156, 161, 157, 163, 168",
            "45, 50, 55, 48, 52, 60, 65, 47, 53, 58, 62, 46, 51, 56, 61, 49, 54, 59, 63, 68, 44, 50, 55, 64, 57, 52, 48, 56, 60, 55, 51, 59",
            "30, 42, 35, 38, 45, 50, 32, 40, 37, 44, 48, 31, 36, 41, 46, 52, 34, 39, 43, 47, 29, 38, 42, 49, 35, 40, 45, 36, 41, 37, 43, 48",
            "12, 14, 13, 15, 12, 16, 14, 13, 15, 17, 12, 14, 13, 15, 16, 13, 14, 12, 15, 17, 13, 14, 16, 15, 12, 14, 13, 16, 15, 14, 13, 12",
            "28, 30, 29, 31, 32, 27, 29, 30, 33, 31, 28, 30, 29, 32, 31, 27, 29, 30, 33, 28, 31, 29, 30, 32, 27, 29, 31, 30, 33, 28, 30, 32",
            "5, 8, 6, 7, 9, 10, 5, 8, 7, 9, 6, 7, 8, 10, 9, 5, 7, 8, 6, 9, 10, 5, 8, 7, 9, 6, 7, 8, 10, 9, 5, 8",
            "2, 5, 3, 4, 6, 8, 2, 5, 4, 7, 3, 5, 6, 8, 4, 3, 5, 7, 2, 6, 8, 4, 5, 3, 7, 6, 2, 5, 4, 8, 3, 6",
            "6, 7, 8, 6, 5, 7, 8, 6, 7, 5, 8, 6, 7, 8, 6, 5, 7, 8, 6, 7, 5, 8, 6, 7, 8, 6, 7, 5, 8, 6, 7, 8",
            "20, 25, 22, 28, 30, 18, 24, 26, 29, 21, 23, 27, 31, 19, 25, 22, 28, 30, 20, 26, 24, 29, 21, 27, 23, 31, 18, 25, 22, 28, 20, 26",
            "10, 15, 12, 20, 18, 10, 15, 25, 20, 12, 18, 15, 10, 20, 25, 12, 15, 18, 10, 20, 15, 25, 12, 18, 20, 10, 15, 25, 20, 12, 18, 15",
            "70, 75, 80, 72, 78, 85, 68, 74, 82, 76, 70, 75, 80, 72, 78, 85, 68, 74, 82, 76, 70, 75, 80, 72, 78, 85, 68, 74, 82, 76, 70, 75",
            
            // TIPE B: Soal Cerita / Narasi (12-21)
            "Seorang kurir mencatat jumlah paket yang ia antar setiap hari selama sebulan. Pada minggu pertama ia mengantar 15, 20, 18, 22, 25, 19, dan 16 paket. Minggu kedua tercatat 21, 24, 17, 20, 23, 18, dan 15 paket. Minggu ketiga melonjak menjadi 26, 28, 22, 25, 27, 20, dan 18 paket. Sisanya di akhir bulan adalah 19, 22, 24, 21, 23, 17, 16, 20, 25, 18, dan 21 paket.",
            "Data pengunjung perpustakaan sekolah tercatat sebagai berikut: Hari Senin 30 siswa, Selasa 35, Rabu 28, Kamis 32, Jumat 40. Minggu berikutnya Senin 33, Selasa 38, Rabu 30, Kamis 35, Jumat 42. Minggu ketiga Senin 29, Selasa 34, Rabu 27, Kamis 31, Jumat 38. Minggu keempat Senin 31, Selasa 36, Rabu 29, Kamis 33, Jumat 41. Minggu kelima Senin 32, Selasa 37, Rabu 31, Kamis 34, Jumat 39. Ditambah 5 hari terakhir: 30, 35, 28, 33, 40.",
            "Hasil panen tomat (kg) dari 30 petak kebun adalah: 5, 8, 6, 7, 9, 10, 5, 8, 7, 9, 6, 7, 8, 10, 9, 5, 7, 8, 6, 9, 10, 5, 8, 7, 9, 6, 7, 8, 10, 9.",
            "Di sebuah toko sepatu, ukuran sepatu yang terjual hari ini adalah: 38, 40, 39, 41, 42, 38, 40, 39, 43, 41, 38, 40, 39, 42, 41, 38, 40, 39, 43, 41, 38, 40, 39, 42, 41, 38, 40, 39, 43, 41, 38, 40.",
            "Skor permainan basket tim sekolah dalam 30 pertandingan terakhir: 50, 60, 55, 65, 70, 52, 62, 58, 68, 72, 50, 60, 55, 65, 70, 52, 62, 58, 68, 72, 50, 60, 55, 65, 70, 52, 62, 58, 68, 72.",
            "Jumlah halaman buku yang dibaca siswa dalam sebulan: 100, 150, 120, 180, 200, 110, 160, 130, 190, 210, 105, 155, 125, 185, 205, 115, 165, 135, 195, 215, 100, 150, 120, 180, 200, 110, 160, 130, 190, 210, 105, 155.",
            "Durasi panggilan telepon (menit) yang dilakukan customer service: 5, 10, 8, 12, 15, 6, 11, 9, 13, 16, 5, 10, 8, 12, 15, 6, 11, 9, 13, 16, 5, 10, 8, 12, 15, 6, 11, 9, 13, 16, 5, 10.",
            "Jumlah mobil yang lewat setiap jam di jalan protokol: 50, 60, 55, 65, 70, 52, 62, 58, 68, 72, 50, 60, 55, 65, 70, 52, 62, 58, 68, 72, 50, 60, 55, 65, 70, 52, 62, 58, 68, 72, 50, 60.",
            "Berat bagasi penumpang pesawat (kg): 15, 20, 18, 22, 25, 16, 21, 19, 23, 26, 15, 20, 18, 22, 25, 16, 21, 19, 23, 26, 15, 20, 18, 22, 25, 16, 21, 19, 23, 26, 15, 20.",
            "Tinggi tanaman kacang hijau (cm) setelah 2 minggu: 10, 15, 12, 18, 20, 11, 16, 13, 19, 21, 10, 15, 12, 18, 20, 11, 16, 13, 19, 21, 10, 15, 12, 18, 20, 11, 16, 13, 19, 21, 10, 15.",
            
            // TIPE C: Blok Data Grid (22-33)
            "45 50 48 52 55\n47 53 49 54 56\n46 51 50 53 57\n48 52 49 55 58\n50 54 51 56 59\n47 53 50 54 57\n49 55 52 56 60",
            "60 65 62 68 70\n63 67 64 69 71\n61 66 65 68 72\n62 67 63 70 73\n64 68 66 71 74\n63 69 65 72 75\n61 66 64 70 73",
            "80 85 82 88 90\n83 87 84 89 91\n81 86 85 88 92\n82 87 83 90 93\n84 88 86 91 94\n83 89 85 92 95\n81 86 84 90 93",
            "25 30 28 32 35\n27 31 29 33 36\n26 30 31 34 37\n28 32 29 35 38\n30 34 31 36 39\n27 33 30 35 38\n29 34 32 36 40",
            "10 12 11 13 15\n11 13 12 14 16\n10 14 13 15 17\n12 14 11 16 18\n13 15 12 17 19\n11 16 13 18 20\n12 15 14 17 19",
            "40 42 41 43 45\n41 43 42 44 46\n40 44 43 45 47\n42 44 41 46 48\n43 45 42 47 49\n41 46 43 48 50\n42 45 44 47 49",
            "55 58 56 59 60\n57 59 58 60 62\n56 60 59 61 63\n58 61 57 62 64\n59 62 58 63 65\n57 61 59 64 66\n58 62 60 63 65",
            "70 72 71 73 75\n71 73 72 74 76\n70 74 73 75 77\n72 74 71 76 78\n73 75 72 77 79\n71 76 73 78 80\n72 75 74 77 79",
            "35 38 36 39 40\n37 39 38 40 42\n36 40 39 41 43\n38 41 37 42 44\n39 42 38 43 45\n37 41 39 44 46\n38 42 40 43 45",
            "15 18 16 19 20\n17 19 18 20 22\n16 20 19 21 23\n18 21 17 22 24\n19 22 18 23 25\n17 21 19 24 26\n18 22 20 23 25",
            "90 92 91 93 95\n91 93 92 94 96\n90 94 93 95 97\n92 94 91 96 98\n93 95 92 97 99\n91 96 93 98 100\n92 95 94 97 99",
            "5 8 6 9 10\n7 9 8 10 12\n6 10 9 11 13\n8 11 7 12 14\n9 12 8 13 15\n7 11 9 14 16\n8 12 10 13 15"
        ];

        // 2. LOGIKA UTAMA
        document.addEventListener("DOMContentLoaded", function() {
            // Ambil data dari LocalStorage (dari halaman Login/Dashboard)
            const namaSiswa = localStorage.getItem('siswa_nama');
            const kelasSiswa = localStorage.getItem('siswa_kelas');

            if (!namaSiswa || !SISWA_BARU) {
                alert("Sesi tidak valid. Silakan login ulang.");
                window.location.href = 'index.html'; // Asumsi ada file index.html untuk login
                return;
            }

            // Tampilkan identitas di Badge
            document.getElementById('namaSiswa').innerText = namaSiswa;
            document.getElementById('kelasSiswa').innerText = kelasSiswa;

            // Cari index siswa di array Master (SISWA_BARU dari siswa.js)
            // findIndex akan mereturn angka 0 sampai 223
            const indexSiswa = SISWA_BARU.findIndex(s => s.nama === namaSiswa);

            let dataSoal = "";
            let kodeUnik = "";

            if (indexSiswa !== -1) {
                // RUMUS DISTRIBUSI SOAL:
                // Kita punya 34 Soal. Kita punya 224 Siswa.
                // Gunakan Modulo (%) untuk membagi rata.
                // Siswa 1 (index 0) -> Soal 1
                // Siswa 35 (index 34) -> Soal 1
                const indexSoal = indexSiswa % DATABASE_SOAL.length;
                
                dataSoal = DATABASE_SOAL[indexSoal];
                
                // Membuat Kode Soal Unik (Misal: A-01, B-05, dst agar terlihat keren)
                // Kita tambah 1 agar tidak ada kode 0
                kodeUnik = `SET-${(indexSoal + 1).toString().padStart(2, '0')}`;
                
                document.getElementById('tempatData').innerText = dataSoal;
                document.getElementById('kodeSoal').innerText = `Kode Paket: ${kodeUnik}`;
            } else {
                // Fallback jika nama tidak ditemukan (misal siswa baru input manual)
                // Beri soal default (index 0)
                document.getElementById('tempatData').innerText = DATABASE_SOAL[0];
                document.getElementById('kodeSoal').innerText = "Kode Paket: DEFAULT";
                console.error("Nama siswa tidak ditemukan di database SISWA_BARU");
            }
        });
    </script>
</body>
</html>
